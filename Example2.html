<!DOCTYPE html>
<html>
<head>
    <title>Example</title>

    <style>
        body {
            background: #dddddd;
        }

        #canvas {
            background: #ffffff;
            border: thin inset #aaaaaa;
        }
    </style>
</head>

<body>
<canvas id='canvas' width="800" height="600">
    Canvas not supported
</canvas>
<script src="common.js"></script>
<script>
    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");

    var box = new Box(100, 100, 100, 100, 50, 50);

    requestAnimationFrame(loop);

    function loop() {
        context.clearRect(0,0, canvas.width, canvas.height);

        var offsetX = box.x + box.anchorX;
        var offsetY = box.y + box.anchorY;

        var cos = Math.cos(0.05);
        var sin = Math.sin(0.05);

        var offsetMat = new Matrix(1, 0, 0, 1, -offsetX, -offsetY);
        var rotateMat = new Matrix(cos, sin, -sin, cos, offsetX + 10, offsetY);
//        var transMat = new Matrix(1, 0, 0, 1, offsetX + 10, offsetY);
        box.transformMatrix(offsetMat.concat(rotateMat));
        //box.transformMatrix(translate);

        box.draw();

        requestAnimationFrame(loop);
    }



</script>
</body>
</html>
